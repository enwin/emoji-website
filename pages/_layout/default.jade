include ../_tools/mixins

block vars

doctype
html( class="no-js" lang=l10n.lang )
  head
    meta( charset="utf-8" )
    meta( http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" )

    title= [title,description].join( ' | ' )

    //- Mobile
    meta( name="viewport" content=meta.viewport.join() )
    meta( name="format-detection" content="telephone=no" )

    //- icons
    //-http://realfavicongenerator.net/faq#why_ico_not_declared
    //-link( rel="shortcut icon" href="/favicon.ico" )

    //-ios
    link( rel="apple-touch-icon" sizes="57x57" href="#{url.icon}apple-touch-icon-57x57.png" )
    link( rel="apple-touch-icon" sizes="60x60" href="#{url.icon}apple-touch-icon-60x60.png" )
    link( rel="apple-touch-icon" sizes="72x72" href="#{url.icon}apple-touch-icon-72x72.png" )
    link( rel="apple-touch-icon" sizes="76x76" href="#{url.icon}apple-touch-icon-76x76.png" )
    link( rel="apple-touch-icon" sizes="114x114" href="#{url.icon}apple-touch-icon-114x114.png" )
    link( rel="apple-touch-icon" sizes="120x120" href="#{url.icon}apple-touch-icon-120x120.png" )
    link( rel="apple-touch-icon" sizes="144x144" href="#{url.icon}apple-touch-icon-144x144.png" )
    link( rel="apple-touch-icon" sizes="152x152" href="#{url.icon}apple-touch-icon-152x152.png" )
    link( rel="apple-touch-icon" sizes="180x180" href="#{url.icon}apple-touch-icon-180x180.png" )
    //-standard
    link( rel="icon" sizes="16x16" href="#{url.icon}favicon-16x16.png" type="image/png" )
    link( rel="icon" sizes="32x32" href="#{url.icon}favicon-32x32.png" type="image/png" )
    link( rel="icon" sizes="96x96" href="#{url.icon}favicon-96x96.png" type="image/png" )
    link( rel="icon" sizes="160x160" href="#{url.icon}favicon-160x160.png" type="image/png" )
    link( rel="icon" sizes="196x196" href="#{url.icon}favicon-192x192.png" type="image/png" )

    //- Webapp
    if webapp
        meta( name="apple-mobile-web-app-capable" content="yes" )
        meta( name="apple-mobile-web-app-title" content=title )
        meta( name="apple-mobile-web-app-status-bar-style" content="black" )
        if webapp.screens
          link(rel="apple-touch-startup-image" href="#{url.icon}ipad-landscape.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) and (-webkit-min-device-pixel-ratio: 1)")
          link(rel="apple-touch-startup-image" href="#{url.icon}ipad-landscape-retina.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) and (-webkit-min-device-pixel-ratio: 2)")

    //- Microsoft: typography + tile icon and color
    if msColor
      meta( name="msapplication-TileImage" content="#{url.icon}mstile-144x144.png" )
      meta( name="msapplication-TileColor" content=msColor )
      meta( name="msapplication-config" content="#{url.icon}browserconfig.xml" )
      meta( name="title" content=title )

    include ../_modules/metas

    //- Modernizr
    script(src="#{url.js}modernizr.js")

    //- Stylesheets
    link( rel="stylesheet" href="#{url.css}styles.css" )

  body(class=pageType)
    block header
      include ../_modules/header

    main
      block content

    block footer
      include ../_modules/footer

    block scripts
      include ../_modules/scripts
